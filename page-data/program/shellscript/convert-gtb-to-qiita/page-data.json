{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/program/shellscript/convert-gtb-to-qiita/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Mushroom Records"}},"markdownRemark":{"id":"98a445b9-0596-5335-8a07-ecf4abcd375b","excerpt":"やりたいこと 向けに書いた記事を Qiita 向けの記事の書き方にしたい ちょっとよくわからないので噛み砕いて 向けに書いた記事をコピーし 正規表現で Qiita…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/74a42a89c53380a30bb51edafb7320ef/21b4d/0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.32911392405063%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACkUlEQVQoz12SW0tVQRiGn7VWZak7TSFCOhphhRgoFWFEFkoHvdi7mUyxoyVmkYdMRaIyLUuxLDtoJxNTNqSmYaQoiu01UVlQV9VFF/2ELkKQaGpt9xbrg2/mY2CeeYf3pWDTAzyL6pFLrhndN9+YsAWtNcXb2kycMjCc1bAwtIa9bzCFD0PYIBWGUJhyakYoYN+KRlLMC8Yaiui//wGIC3eApantNB54ZcyyZvu55hzwTgERPj8gKggRKvCADWTFNhobqSSGvMiqzKePW8qHvt04+eJ9yfa2jHO7nhM2J2IhsM4KYWPBT5CvSRA2I0LxTih6hSI+ADb8QK214Si6lNPd/ejciK7O7tI3Tr7QVbJrMjn8xFbgkWXN8gAHF6ewIXOcYeGjUypeSsVDqfgqbCLklEKD1RSyjOMxTYUvJ26XDPx2L6r/VZTSOlGV+VTnJjbVARtCw0NTgdCczwjhY1AqeqRCS8UDqRiTiv2OSqmwWMAhXOyPvl7Q/0P1fdH1R/smK3Z3TPTff6/L07wlQHSYKzQFKEo8w5Wsj3S6h4gXNqekzXxh81gqPAGgSev5UfNW8QAVuztq+u6O656mt7q9ZkxfPdz7PZnKGOCAaZqZQJ1hsjX7E949Y5yVNmuFTalUpDuGBFyHtHk1BKOSv/7ekbId7c/Kdz25mRFVu1ysqqZqi8+JzVLH6aQycA8zXyrqpWJYKhqkInLaFAe403WZOAr90XAyeef0IHW5faTOvYiMqzbTVuYTrM0NmJ7RKSX/tRGcyUtqISPqCumRtZx1e82WiiGr9uAz61his7Ej9hSukGh/vKMToFb7Y+NkzpI2plBYwQxOf9kB5iU1B/aZ3Tx97pRfwYyLwf4H9rf+ALHuFME2XotsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"0\"\n        title=\"0\"\n        src=\"/static/74a42a89c53380a30bb51edafb7320ef/f058b/0.png\"\n        srcset=\"/static/74a42a89c53380a30bb51edafb7320ef/c26ae/0.png 158w,\n/static/74a42a89c53380a30bb51edafb7320ef/6bdcf/0.png 315w,\n/static/74a42a89c53380a30bb51edafb7320ef/f058b/0.png 630w,\n/static/74a42a89c53380a30bb51edafb7320ef/40601/0.png 945w,\n/static/74a42a89c53380a30bb51edafb7320ef/78612/0.png 1260w,\n/static/74a42a89c53380a30bb51edafb7320ef/21b4d/0.png 1280w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h1>やりたいこと</h1>\n<ul>\n<li><code class=\"language-text\">Gatsbyjs</code>向けに書いた記事を</li>\n<li>Qiita 向けの記事の書き方にしたい</li>\n</ul>\n<h2>ちょっとよくわからないので噛み砕いて</h2>\n<ul>\n<li><code class=\"language-text\">Gatsbyjs</code>向けに書いた記事をコピーし</li>\n<li>正規表現で Qiita 向けの記述になるように変形し</li>\n<li>なんでもいいのでテキストとしてすぐ扱えるようにする</li>\n</ul>\n<p>じゃあやってみましょう。</p>\n<p>以前、<code class=\"language-text\">A to Bな変換系WebアプリをFlaskで作ろう！</code>という記事を書きましたが、<br>\nこんな変換のためにいちいち Web アプリをローンチするのもかったるすぎるので<br>\nPC 上で完結できるようにしましょう。</p>\n<h3>そもそも〜向けの記事って何？</h3>\n<p><strong>コードブロックの書き方がちょっと違います。</strong><br>\nそのせいで片方向けの記事を書いてもう片方で公開したいとなるとちょっとめんどくさいです。</p>\n<p>Gatsby 向けの記事だと<code class=\"language-text\">python:title=hoge</code>。\nQiita 向けの記事だと<code class=\"language-text\">python :hoge</code>みたいな感じ。</p>\n<p>これをごちゃごちゃにするとこうなります。</p>\n\n        <div class=\"gatsby-code-title\">\n          <span>script.py</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"></code></pre></div>\n<p>これではちょっと嫌ですね。\nそれでは、やっていきます。</p>\n<h2>材料</h2>\n<ul>\n<li>ShellScript もとい bash</li>\n</ul>\n<p>以上。</p>\n<h2>早速組み立てていく</h2>\n<p>できたものがこちらになります。</p>\n\n        <div class=\"gatsby-code-title\">\n          <span>script.sh</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"># クリップボードから文字列を変数に代入する\ncopied=`pbpaste | nkf -w`\n\n# Qiita &lt;- Gatsby\npat_1_before=&#39;(`{3,4})(.+):title=(.+)&#39;\npat_1_after=&#39;:&#39;\nstrings=`echo &quot;$copied&quot; | sed -E &quot;s/$pat_1_before/$pat_1_after/g&quot;`\necho &quot;$strings&quot; | open -f</code></pre></div>\n<ul>\n<li>変数<code class=\"language-text\">copied</code>を作る。</li>\n<li><code class=\"language-text\">copied</code>に<code class=\"language-text\">pbpaste | nkf -w</code>で、<br>\nクリップボードの中身をエンコードしたのちぶち込む。</li>\n<li>正規表現のパターンを用意する。</li>\n<li>変換する</li>\n<li><code class=\"language-text\">open -f</code>でテキストエディタ上に開く。</li>\n</ul>\n<p>これで、</p>\n<ul>\n<li>Gatsby 向けに書いた記事をコピーする</li>\n<li>スクリプトを実行する</li>\n<li>変換されて、テキストとしてアウトプットされる</li>\n</ul>\n<p>といった感じで使えるようになりました、やったね。</p>\n<p>…</p>\n<p><strong>まあ、ShellScript 初見で挑んで</strong><br>\n<strong>こんな簡単に終わったわけがないんですけど</strong></p>\n<h2>詰まったところ</h2>\n<p>Q. <code class=\"language-text\">pbpaste</code>使うなら相方の<code class=\"language-text\">pbcopy</code>でコピーすればスマートじゃね？<br>\nA. <strong>何故か知らないんですけどそれができなかったのです。</strong><br>\nできなかったので、妥協案として「テキストエディタ上に開く」という動作にしました。<br>\nこれはこれでファイルが生成されないのでスマートです。</p>\n<p>以上です。\n<code class=\"language-text\">pbcopy</code>使えないじゃん！って気づくのに 1 時間位かかりました。</p>\n<h3>参考</h3>\n<p><a href=\"https://shuzo-kino.hateblo.jp/entry/2017/06/21/235134\">sed を使って”: 1 not defined in the RE”などと出たらキャプチャの構文が間違っている Bye Bye Moore</a></p>\n<p><a href=\"https://shellscript.sunone.me/character_code.html\">文字コードと改行コード UNIX &#x26; Linux コマンド・シェルスクリプト リファレンス</a></p>\n<p><a href=\"https://xtech.nikkei.com/it/atcl/column/15/042000103/080400036/\">［clip / pbcopy・pbpaste］クリップボードにコピー | 日経クロステック（xTECH）</a></p>","frontmatter":{"title":"Gatsby.js向けに書いた記事をQiita向けに変換したい","date":"2021/02/09","description":"Gatsby"}}},"pageContext":{"id":"98a445b9-0596-5335-8a07-ecf4abcd375b","previousPostId":"35234fc0-fc73-5485-a6b6-3be7c09bb4f6","nextPostId":"f677bb3b-0542-59b6-8321-b774769956e1"}},
    "staticQueryHashes": ["3713412316"]}